# ğŸ¯ Kubernetes éƒ¨ç½²æ¡ˆä¾‹

> ä¸€ä¸ªç”Ÿäº§çº§çš„å‰åç«¯åˆ†ç¦»ç™»å½•ç³»ç»Ÿï¼Œå®Œæ•´çš„ K8s éƒ¨ç½²æ–¹æ¡ˆç¤ºä¾‹  
> **æŠ€æœ¯æ ˆ**: Vue3 + Django + PostgreSQL + Kubernetes

[![Kubernetes](https://img.shields.io/badge/Kubernetes-326CE5?style=flat&logo=kubernetes&logoColor=white)](https://kubernetes.io/)
[![Vue3](https://img.shields.io/badge/Vue.js-35495E?style=flat&logo=vue.js&logoColor=4FC08D)](https://vuejs.org/)
[![Django](https://img.shields.io/badge/Django-092E20?style=flat&logo=django&logoColor=white)](https://www.djangoproject.com/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=flat&logo=postgresql&logoColor=white)](https://www.postgresql.org/)

---

## âœ¨ é¡¹ç›®ç‰¹ç‚¹

- ğŸ¨ **ç°ä»£åŒ–å‰ç«¯**: Vue3 + Viteï¼Œå¿«é€Ÿå¼€å‘ä½“éªŒ
- ğŸ” **å®‰å…¨è®¤è¯**: JWT Token è®¤è¯ï¼ŒRefresh Token æ”¯æŒ
- ğŸš€ **é«˜å¯ç”¨**: å¤šå‰¯æœ¬éƒ¨ç½²ï¼Œè‡ªåŠ¨å¥åº·æ£€æŸ¥å’Œæ¢å¤
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–**: PostgreSQL + PersistentVolume
- ğŸ“¦ **å®¹å™¨åŒ–**: å¤šé˜¶æ®µ Docker æ„å»ºï¼Œé•œåƒä½“ç§¯å°
- â˜¸ï¸ **K8s åŸç”Ÿ**: å®Œæ•´çš„ Kubernetes éƒ¨ç½²é…ç½®
- ğŸŒ **å›½å†…ä¼˜åŒ–**: é…ç½®å›½å†…é•œåƒæºï¼Œæ„å»ºé€Ÿåº¦å¿«

---

## ğŸ“¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Kubernetes é›†ç¾¤ (Minikube)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Nginx    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Frontend  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  Backend   â”‚          â”‚
â”‚  â”‚  (Vue3)    â”‚  Proxy    â”‚  (Django)  â”‚          â”‚
â”‚  â”‚  2 Pods    â”‚           â”‚  3 Pods    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚
â”‚       â†‘                          â”‚                 â”‚
â”‚       â”‚ HTTP                     â”‚ SQL             â”‚
â”‚  ç”¨æˆ·è®¿é—®                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”          â”‚
â”‚  :8080                      â”‚PostgreSQL â”‚          â”‚
â”‚                             â”‚  + PV     â”‚          â”‚
â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®éƒ¨ç½²ï¼ˆ5åˆ†é’Ÿï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <your-repo>
cd 01-k8s

# 2. é…ç½® Docker ç¯å¢ƒ
eval $(minikube docker-env)

# 3. æ„å»ºé•œåƒ
docker build -t login-backend:latest ./backend
docker build -t login-frontend:latest ./frontend

# 4. åˆ›å»ºå­˜å‚¨ç›®å½•
minikube ssh "sudo mkdir -p /mnt/data/postgres && sudo chmod 777 /mnt/data/postgres"

# 5. éƒ¨ç½²åˆ° K8s
./scripts/deploy.sh

# 6. è®¿é—®ç³»ç»Ÿ
kubectl port-forward -n login-system service/frontend-service 8080:80
# æµè§ˆå™¨æ‰“å¼€: http://localhost:8080
```

**è¯¦ç»†éƒ¨ç½²æ­¥éª¤**: è¯·æŸ¥çœ‹ **[ğŸ“˜ éƒ¨ç½²æŒ‡å—](./éƒ¨ç½²æŒ‡å—.md)**

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
01-k8s/
â”œâ”€â”€ frontend/                 # å‰ç«¯é¡¹ç›® (Vue3)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/           # é¡µé¢ç»„ä»¶ (Login, Register, Home)
â”‚   â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ api/             # API æ¥å£
â”‚   â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•° (Token ç®¡ç†)
â”‚   â”œâ”€â”€ Dockerfile           # å‰ç«¯é•œåƒ (53MB)
â”‚   â”œâ”€â”€ nginx.conf           # Nginx é…ç½®
â”‚   â””â”€â”€ vite.config.js       # Vite é…ç½®
â”‚
â”œâ”€â”€ backend/                  # åç«¯é¡¹ç›® (Django)
â”‚   â”œâ”€â”€ apps/
â”‚   â”‚   â””â”€â”€ authentication/  # è®¤è¯åº”ç”¨
â”‚   â”‚       â”œâ”€â”€ models.py    # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ serializers.py  # åºåˆ—åŒ–å™¨
â”‚   â”‚       â””â”€â”€ views.py     # API è§†å›¾
â”‚   â”œâ”€â”€ config/              # Django é…ç½®
â”‚   â”œâ”€â”€ Dockerfile           # åç«¯é•œåƒ (116MB)
â”‚   â””â”€â”€ requirements.txt     # Python ä¾èµ–
â”‚
â”œâ”€â”€ k8s/                     # Kubernetes é…ç½®
â”‚   â”œâ”€â”€ namespace.yaml       # å‘½åç©ºé—´
â”‚   â”œâ”€â”€ postgres/            # PostgreSQL é…ç½®
â”‚   â”‚   â”œâ”€â”€ *-secret.yaml
â”‚   â”‚   â”œâ”€â”€ *-configmap.yaml
â”‚   â”‚   â”œâ”€â”€ *-pv.yaml
â”‚   â”‚   â”œâ”€â”€ *-pvc.yaml
â”‚   â”‚   â”œâ”€â”€ *-deployment.yaml
â”‚   â”‚   â””â”€â”€ *-service.yaml
â”‚   â”œâ”€â”€ backend/             # Backend é…ç½®
â”‚   â””â”€â”€ frontend/            # Frontend é…ç½®
â”‚
â”œâ”€â”€ scripts/                 # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ install-k8s-cn.sh   # K8s å®‰è£… (å›½å†…é•œåƒ)
â”‚   â”œâ”€â”€ deploy.sh           # ä¸€é”®éƒ¨ç½²
â”‚   â”œâ”€â”€ cleanup.sh          # æ¸…ç†è„šæœ¬
â”‚   â”œâ”€â”€ backup.sh           # æ•°æ®å¤‡ä»½
â”‚   â”œâ”€â”€ restore.sh          # æ•°æ®æ¢å¤
â”‚   â””â”€â”€ setup-windows-access.sh  # Windows è®¿é—®é…ç½®
â”‚
â”œâ”€â”€ éƒ¨ç½²æŒ‡å—.md              # ğŸ‘ˆ ä¸»è¦éƒ¨ç½²æ–‡æ¡£
â””â”€â”€ æŠ€æœ¯æ–‡æ¡£.md              # æŠ€æœ¯æ¶æ„å’Œ Bug è®°å½•
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Vue.js | 3.x | æ¸è¿›å¼ JavaScript æ¡†æ¶ |
| Vite | 5.x | ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…· |
| Vue Router | 4.x | å®˜æ–¹è·¯ç”±ç®¡ç†å™¨ |
| Axios | 1.x | HTTP å®¢æˆ·ç«¯ |
| Nginx | Alpine | Web æœåŠ¡å™¨ + åå‘ä»£ç† |

### åç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Django | 4.2 | Python Web æ¡†æ¶ |
| DRF | 3.14 | Django REST Framework |
| JWT | 5.3 | JSON Web Token è®¤è¯ |
| PostgreSQL | 15 | å…³ç³»å‹æ•°æ®åº“ |
| Gunicorn | 21.2 | WSGI æœåŠ¡å™¨ |

### DevOps
| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Kubernetes | 1.34+ | å®¹å™¨ç¼–æ’å¹³å° |
| Docker | 20.10+ | å®¹å™¨åŒ–å¹³å° |
| Minikube | latest | æœ¬åœ° K8s é›†ç¾¤ |

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| **[ğŸ“˜ éƒ¨ç½²æŒ‡å—](./éƒ¨ç½²æŒ‡å—.md)** | â­ å®Œæ•´éƒ¨ç½²æ–‡æ¡£ï¼ŒåŒ…å«æ‰€æœ‰è®¿é—®æ–¹å¼å’Œæ•…éšœæ’æŸ¥ |
| [ğŸ“– æŠ€æœ¯æ–‡æ¡£](./æŠ€æœ¯æ–‡æ¡£.md) | æŠ€æœ¯æ¶æ„ã€ä¼˜åŒ–æ–¹æ¡ˆã€Bug ä¿®å¤è®°å½• |

---

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½

- [x] ç”¨æˆ·æ³¨å†Œï¼ˆé‚®ç®±éªŒè¯ã€å¯†ç å¼ºåº¦æ£€æŸ¥ï¼‰
- [x] ç”¨æˆ·ç™»å½•ï¼ˆJWT Token è®¤è¯ï¼‰
- [x] Token åˆ·æ–°ï¼ˆRefresh Token æ”¯æŒï¼‰
- [x] è‡ªåŠ¨ Token æ³¨å…¥ï¼ˆAxios æ‹¦æˆªå™¨ï¼‰
- [x] è·¯ç”±å®ˆå«ï¼ˆæœªç™»å½•è‡ªåŠ¨è·³è½¬ï¼‰
- [x] ç”¨æˆ·ä¿¡æ¯å±•ç¤º
- [x] é€€å‡ºç™»å½•ï¼ˆToken æ¸…ç†ï¼‰
- [x] å¥åº·æ£€æŸ¥æ¥å£
- [x] æ•°æ®æŒä¹…åŒ–ï¼ˆPostgreSQL + PVï¼‰
- [x] å¤šå‰¯æœ¬é«˜å¯ç”¨éƒ¨ç½²
- [x] è‡ªåŠ¨å¥åº·æ£€æŸ¥å’Œæ¢å¤
- [x] æ»šåŠ¨æ›´æ–°æ”¯æŒ

### ğŸš§ å¯æ‰©å±•åŠŸèƒ½

- [ ] å¯†ç æ‰¾å›ï¼ˆé‚®ä»¶ï¼‰
- [ ] ä¸ªäººä¿¡æ¯ä¿®æ”¹
- [ ] å¤´åƒä¸Šä¼ 
- [ ] ç¬¬ä¸‰æ–¹ç™»å½• (OAuth)
- [ ] å¤šå› ç´ è®¤è¯ (MFA)
- [ ] ç”¨æˆ·ç®¡ç†åå°
- [ ] æ“ä½œæ—¥å¿—å®¡è®¡
- [ ] Ingress + åŸŸåè®¿é—®
- [ ] HTTPS/TLS æ”¯æŒ
- [ ] ç›‘æ§å‘Šè­¦ï¼ˆPrometheus + Grafanaï¼‰

---

## ğŸŒ API æ¥å£

### å…¬å¼€æ¥å£ï¼ˆæ— éœ€è®¤è¯ï¼‰

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/register/` | ç”¨æˆ·æ³¨å†Œ |
| POST | `/api/token/` | ç”¨æˆ·ç™»å½•ï¼ˆè·å– Tokenï¼‰ |
| POST | `/api/token/refresh/` | åˆ·æ–° Token |
| GET  | `/api/health/` | å¥åº·æ£€æŸ¥ |

### å—ä¿æŠ¤æ¥å£ï¼ˆéœ€è¦è®¤è¯ï¼‰

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET  | `/api/profile/` | è·å–ç”¨æˆ·ä¿¡æ¯ |
| PUT  | `/api/profile/` | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ |
| POST | `/api/logout/` | é€€å‡ºç™»å½• |

**API è¯¦ç»†æ–‡æ¡£**: éƒ¨ç½²åè®¿é—® http://localhost:8080/api/ æŸ¥çœ‹ DRF è‡ªåŠ¨ç”Ÿæˆçš„æ–‡æ¡£

---

## ğŸ”§ ç¯å¢ƒè¦æ±‚

### å¿…éœ€
- Docker >= 20.10
- Kubernetes (Minikube/K3s/Kind)
- kubectl >= 1.19
- è‡³å°‘ 4GB å†…å­˜
- è‡³å°‘ 10GB ç£ç›˜ç©ºé—´

### å¯é€‰
- Git
- curl/wget
- Visual Studio Code (æ¨è)

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **é•œåƒå¤§å°** | å‰ç«¯ 53MBï¼Œåç«¯ 116MB |
| **å¯åŠ¨æ—¶é—´** | < 60ç§’ï¼ˆåŒ…å«æ•°æ®åº“è¿ç§»ï¼‰ |
| **å†…å­˜å ç”¨** | ~1.5GBï¼ˆæ‰€æœ‰ Podï¼‰ |
| **å¹¶å‘æ”¯æŒ** | 100+ å¹¶å‘ç”¨æˆ· |
| **å“åº”æ—¶é—´** | API < 50ms, é¡µé¢ < 200ms |

---

## ğŸ› é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

1. **Pod ä¸€ç›´ Pending**: æ£€æŸ¥ PV/PVC ç»‘å®šçŠ¶æ€
2. **é•œåƒæ‹‰å–å¤±è´¥**: ç¡®ä¿ä½¿ç”¨ `eval $(minikube docker-env)`
3. **æ— æ³•è®¿é—®**: ä½¿ç”¨ `kubectl port-forward` è€Œä¸æ˜¯ç›´æ¥è®¿é—® Minikube IP
4. **æ•°æ®åº“è¿æ¥å¤±è´¥**: ç­‰å¾… PostgreSQL Pod å®Œå…¨å°±ç»ª

è¯¦ç»†è§£å†³æ–¹æ¡ˆ: æŸ¥çœ‹ [éƒ¨ç½²æŒ‡å— - å¸¸è§é—®é¢˜](./éƒ¨ç½²æŒ‡å—.md#å¸¸è§é—®é¢˜)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-11-27)
- âœ… å®Œæˆå‰åç«¯åŸºç¡€åŠŸèƒ½
- âœ… å®Œæˆ K8s éƒ¨ç½²é…ç½®
- âœ… å®Œæˆéƒ¨ç½²æ–‡æ¡£
- âœ… ä¼˜åŒ–æ„å»ºé€Ÿåº¦ï¼ˆå›½å†…é•œåƒæºï¼‰
- âœ… ä¿®å¤æ³¨å†Œæ¥å£ Bug

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

---

## ğŸ™ è‡´è°¢

- [Kubernetes](https://kubernetes.io/) - å®¹å™¨ç¼–æ’å¹³å°
- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [Django](https://www.djangoproject.com/) - é«˜çº§ Python Web æ¡†æ¶
- [PostgreSQL](https://www.postgresql.org/) - å¼ºå¤§çš„å¼€æºæ•°æ®åº“

---

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®æ–‡æ¡£: æŸ¥çœ‹ `éƒ¨ç½²æŒ‡å—.md`
- æŠ€æœ¯ç»†èŠ‚: æŸ¥çœ‹ `æŠ€æœ¯æ–‡æ¡£.md`
- é—®é¢˜åé¦ˆ: æäº¤ Issue
- æŠ€æœ¯äº¤æµ: åˆ›å»º Discussion

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star â­**

Made with â¤ï¸ by AI Assistant

</div>

