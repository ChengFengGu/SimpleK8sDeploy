# ğŸš€ K8s ç™»å½•ç³»ç»Ÿ - å¿«é€Ÿéƒ¨ç½²æŒ‡å—

> ä¸€ä¸ªåŸºäº Kubernetes çš„å‰åç«¯åˆ†ç¦»ç™»å½•ç³»ç»Ÿ  
> å‰ç«¯ï¼šVue3 + Vite + Nginx | åç«¯ï¼šDjango + DRF | æ•°æ®åº“ï¼šPostgreSQL

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
2. [å¿«é€Ÿå¼€å§‹ï¼ˆ5åˆ†é’Ÿï¼‰](#å¿«é€Ÿå¼€å§‹)
3. [è¯¦ç»†éƒ¨ç½²æ­¥éª¤](#è¯¦ç»†éƒ¨ç½²æ­¥éª¤)
4. [è®¿é—®å’Œæµ‹è¯•](#è®¿é—®å’Œæµ‹è¯•)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
6. [ç®¡ç†å‘½ä»¤](#ç®¡ç†å‘½ä»¤)

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
ç”¨æˆ·æµè§ˆå™¨
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Kubernetes é›†ç¾¤ (Minikube)            â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Frontend    â”‚â”€â”€â”€â†’â”‚  Backend     â”‚  â”‚
â”‚  â”‚  Vue3+Nginx  â”‚    â”‚  Django+DRF  â”‚  â”‚
â”‚  â”‚  (2 pods)    â”‚    â”‚  (3 pods)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚          â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                      â”‚  PostgreSQL   â”‚  â”‚
â”‚                      â”‚  (1 pod+PV)   â”‚  â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- âœ… å‰åç«¯åˆ†ç¦»ï¼Œç‹¬ç«‹æ‰©å±•
- âœ… é«˜å¯ç”¨éƒ¨ç½²ï¼ˆå¤šå‰¯æœ¬ï¼‰
- âœ… æ•°æ®æŒä¹…åŒ–ï¼ˆPostgreSQL PVï¼‰
- âœ… JWT Token è®¤è¯
- âœ… è‡ªåŠ¨å¥åº·æ£€æŸ¥å’Œæ¢å¤

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

ç¡®ä¿å·²å®‰è£…ï¼š
- âœ… Docker
- âœ… Kubernetes (Minikube/K3s/Kind)
- âœ… kubectl

### ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /root/learn/01-k8s

# 2. é…ç½® Docker ç¯å¢ƒï¼ˆä½¿ç”¨ Minikube çš„ Dockerï¼‰
eval $(minikube docker-env)

# 3. æ„å»ºé•œåƒï¼ˆçº¦2-3åˆ†é’Ÿï¼‰
cd backend && docker build -t login-backend:latest .
cd ../frontend && docker build -t login-frontend:latest .

# 4. åˆ›å»ºæŒä¹…åŒ–å­˜å‚¨ç›®å½•
minikube ssh "sudo mkdir -p /mnt/data/postgres && sudo chmod 777 /mnt/data/postgres"

# 5. ä¸€é”®éƒ¨ç½²ï¼ˆçº¦1-2åˆ†é’Ÿï¼‰
cd /root/learn/01-k8s
./scripts/deploy.sh

# 6. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ŒæŸ¥çœ‹çŠ¶æ€
kubectl get pods -n login-system -w
```

**å®Œæˆï¼** ğŸ‰ ç­‰å¾…æ‰€æœ‰ Pod çŠ¶æ€å˜ä¸º `Running` å³å¯è®¿é—®ã€‚

---

## ğŸ“ è¯¦ç»†éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1ï¼šå‡†å¤‡ Kubernetes ç¯å¢ƒ

#### 1.1 æ£€æŸ¥ Minikube çŠ¶æ€

```bash
minikube status
```

å¦‚æœæœªè¿è¡Œï¼Œæ‰§è¡Œï¼š

```bash
# ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿå®‰è£…è„šæœ¬
./scripts/install-k8s-cn.sh
```

#### 1.2 éªŒè¯é›†ç¾¤

```bash
kubectl cluster-info
kubectl get nodes
```

---

### æ­¥éª¤ 2ï¼šæ„å»º Docker é•œåƒ

#### 2.1 é…ç½® Docker ç¯å¢ƒ

```bash
# é‡è¦ï¼šä½¿ç”¨ Minikube çš„ Docker å®ˆæŠ¤è¿›ç¨‹
eval $(minikube docker-env)

# éªŒè¯
docker info | grep -i name
# åº”è¯¥æ˜¾ç¤ºï¼šName: minikube
```

#### 2.2 æ„å»ºåç«¯é•œåƒ

```bash
cd /root/learn/01-k8s/backend
docker build -t login-backend:latest .
```

**ä¼˜åŒ–è¯´æ˜ï¼š**
- å·²é…ç½®é˜¿é‡Œäº‘ APK å’Œ PyPI é•œåƒæº
- å¤šé˜¶æ®µæ„å»ºï¼Œæœ€ç»ˆé•œåƒä»… 116MB
- åŒ…å« PostgreSQL å®¢æˆ·ç«¯åº“

#### 2.3 æ„å»ºå‰ç«¯é•œåƒ

```bash
cd /root/learn/01-k8s/frontend
docker build -t login-frontend:latest .
```

**ä¼˜åŒ–è¯´æ˜ï¼š**
- å·²é…ç½®æ·˜å® npm é•œåƒæº
- å¤šé˜¶æ®µæ„å»ºï¼šNode.js æ„å»º â†’ Nginx è¿è¡Œ
- æœ€ç»ˆé•œåƒä»… 53MB

#### 2.4 éªŒè¯é•œåƒ

```bash
eval $(minikube docker-env)
docker images | grep login
```

åº”è¯¥çœ‹åˆ°ï¼š
```
login-backend    latest    xxxx    xx minutes ago    116MB
login-frontend   latest    yyyy    xx minutes ago    53MB
```

---

### æ­¥éª¤ 3ï¼šåˆ›å»ºæŒä¹…åŒ–å­˜å‚¨

```bash
# åœ¨ Minikube èŠ‚ç‚¹ä¸­åˆ›å»ºç›®å½•
minikube ssh "sudo mkdir -p /mnt/data/postgres && sudo chmod 777 /mnt/data/postgres"

# éªŒè¯
minikube ssh "ls -ld /mnt/data/postgres"
```

---

### æ­¥éª¤ 4ï¼šéƒ¨ç½²åˆ° Kubernetes

#### æ–¹æ³• Aï¼šä½¿ç”¨è‡ªåŠ¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd /root/learn/01-k8s
./scripts/deploy.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. åˆ›å»ºå‘½åç©ºé—´ `login-system`
2. éƒ¨ç½² PostgreSQLï¼ˆSecretã€ConfigMapã€PVã€PVCã€Deploymentã€Serviceï¼‰
3. éƒ¨ç½² Backendï¼ˆSecretã€ConfigMapã€Deploymentã€Serviceï¼‰
4. éƒ¨ç½² Frontendï¼ˆConfigMapã€Deploymentã€Serviceï¼‰
5. ç­‰å¾…æ‰€æœ‰ Pod å°±ç»ª
6. æ˜¾ç¤ºè®¿é—®ä¿¡æ¯

#### æ–¹æ³• Bï¼šæ‰‹åŠ¨é€æ­¥éƒ¨ç½²

```bash
cd /root/learn/01-k8s

# 1. åˆ›å»ºå‘½åç©ºé—´
kubectl apply -f k8s/namespace.yaml

# 2. éƒ¨ç½² PostgreSQL
kubectl apply -f k8s/postgres/
kubectl wait --for=condition=ready pod -l app=postgres -n login-system --timeout=120s

# 3. éƒ¨ç½²åç«¯
kubectl apply -f k8s/backend/
kubectl wait --for=condition=ready pod -l app=backend -n login-system --timeout=120s

# 4. éƒ¨ç½²å‰ç«¯
kubectl apply -f k8s/frontend/
kubectl wait --for=condition=ready pod -l app=frontend -n login-system --timeout=120s
```

---

### æ­¥éª¤ 5ï¼šéªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹æ‰€æœ‰èµ„æº
kubectl get all -n login-system

# æŸ¥çœ‹ Pod çŠ¶æ€
kubectl get pods -n login-system

# é¢„æœŸè¾“å‡ºï¼š
# NAME                                   READY   STATUS    RESTARTS   AGE
# backend-deployment-xxx-xxx             1/1     Running   0          2m
# backend-deployment-xxx-yyy             1/1     Running   0          2m
# backend-deployment-xxx-zzz             1/1     Running   0          2m
# frontend-deployment-xxx-xxx            1/1     Running   0          1m
# frontend-deployment-xxx-yyy            1/1     Running   0          1m
# postgres-deployment-xxx-xxx            1/1     Running   0          3m
```

âœ… æ‰€æœ‰ Pod çš„ STATUS éƒ½åº”è¯¥æ˜¯ `Running`ï¼ŒREADY åº”è¯¥æ˜¯ `1/1`ã€‚

---

## ğŸŒ è®¿é—®å’Œæµ‹è¯•

### è®¿é—®æ–¹å¼

ç”±äºåœ¨ WSL2 ç¯å¢ƒä¸‹ï¼ŒMinikube çš„ IP å¯èƒ½æ— æ³•ç›´æ¥è®¿é—®ï¼Œæ¨èä½¿ç”¨ **Port Forward** æ–¹å¼ï¼š

#### æ–¹å¼ 1ï¼šPort Forwardï¼ˆæ¨èï¼‰

```bash
# è½¬å‘å‰ç«¯æœåŠ¡åˆ°æœ¬åœ° 8080 ç«¯å£
kubectl port-forward -n login-system service/frontend-service 8080:80
```

ç„¶ååœ¨æµè§ˆå™¨è®¿é—®ï¼š**http://localhost:8080**

#### æ–¹å¼ 2ï¼šMinikube Service

```bash
# è‡ªåŠ¨åˆ›å»ºéš§é“å¹¶æ‰“å¼€æµè§ˆå™¨
minikube service frontend-service -n login-system
```

#### æ–¹å¼ 3ï¼šNodePortï¼ˆå¦‚æœç½‘ç»œå¯è¾¾ï¼‰

```bash
# è·å–è®¿é—®åœ°å€
MINIKUBE_IP=$(minikube ip)
NODE_PORT=$(kubectl get svc frontend-service -n login-system -o jsonpath='{.spec.ports[0].nodePort}')
echo "è®¿é—®åœ°å€: http://$MINIKUBE_IP:$NODE_PORT"
```

---

### åŠŸèƒ½æµ‹è¯•

#### 1. å¥åº·æ£€æŸ¥

```bash
# ä½¿ç”¨ port-forward æµ‹è¯•åç«¯ API
kubectl port-forward -n login-system service/backend-service 8000:8000 &

curl http://localhost:8000/api/health/
# é¢„æœŸè¾“å‡ºï¼š{"status":"healthy","service":"authentication-api","version":"1.0.0"}
```

#### 2. ç”¨æˆ·æ³¨å†Œ

**æµè§ˆå™¨æµ‹è¯•ï¼š**
1. è®¿é—® http://localhost:8080/register
2. å¡«å†™æ³¨å†Œä¿¡æ¯ï¼š
   - ç”¨æˆ·åï¼š`demo001`
   - é‚®ç®±ï¼š`demo001@example.com`
   - å¯†ç ï¼š`demo123456`
   - ç¡®è®¤å¯†ç ï¼š`demo123456`
3. ç‚¹å‡»"æ³¨å†Œ"æŒ‰é’®
4. âœ… åº”æ˜¾ç¤º"æ³¨å†ŒæˆåŠŸï¼3ç§’åè·³è½¬åˆ°ç™»å½•é¡µé¢..."

**å‘½ä»¤è¡Œæµ‹è¯•ï¼š**
```bash
curl -X POST http://localhost:8080/api/register/ \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "password": "test123456",
    "password2": "test123456"
  }'
```

#### 3. ç”¨æˆ·ç™»å½•

**æµè§ˆå™¨æµ‹è¯•ï¼š**
1. è®¿é—® http://localhost:8080/login
2. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
3. ç‚¹å‡»"ç™»å½•"
4. âœ… åº”è·³è½¬åˆ°é¦–é¡µå¹¶æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯

**å‘½ä»¤è¡Œæµ‹è¯•ï¼š**
```bash
curl -X POST http://localhost:8080/api/token/ \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "test123456"
  }'
```

#### 4. éªŒè¯æ•°æ®åº“

```bash
# è¿›å…¥ PostgreSQL å®¹å™¨
kubectl exec -it -n login-system deployment/postgres-deployment -- psql -U postgres -d logindb

# æŸ¥çœ‹ç”¨æˆ·è¡¨
\dt
SELECT * FROM users;

# é€€å‡º
\q
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: Pod ä¸€ç›´å¤„äº Pending çŠ¶æ€

**åŸå› ï¼š** PV æ— æ³•ç»‘å®šæˆ–èµ„æºä¸è¶³

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥ PV/PVC çŠ¶æ€
kubectl get pv,pvc -n login-system

# ç¡®ä¿å­˜å‚¨ç›®å½•å­˜åœ¨
minikube ssh "sudo ls -ld /mnt/data/postgres"

# æŸ¥çœ‹ Pod è¯¦ç»†ä¿¡æ¯
kubectl describe pod <pod-name> -n login-system
```

### Q2: åç«¯ Pod å¯åŠ¨å¤±è´¥

**åŸå› ï¼š** æ•°æ®åº“æœªå°±ç»ªæˆ–è¿æ¥å¤±è´¥

**è§£å†³ï¼š**
```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
kubectl logs -n login-system deployment/backend-deployment

# æ£€æŸ¥æ•°æ®åº“æ˜¯å¦è¿è¡Œ
kubectl get pods -n login-system -l app=postgres

# æµ‹è¯•æ•°æ®åº“è¿æ¥
kubectl exec -it -n login-system deployment/backend-deployment -- sh
nc -zv postgres-service 5432
```

### Q3: å‰ç«¯æ˜¾ç¤º 502 Bad Gateway

**åŸå› ï¼š** åç«¯æœåŠ¡æœªå°±ç»ª

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥åç«¯ Pod çŠ¶æ€
kubectl get pods -n login-system -l app=backend

# æŸ¥çœ‹åç«¯æ—¥å¿—
kubectl logs -n login-system deployment/backend-deployment --tail=50

# æ£€æŸ¥å¥åº·æ£€æŸ¥
kubectl describe pod -n login-system -l app=backend
```

### Q4: é•œåƒæ‹‰å–å¤±è´¥ (ImagePullBackOff)

**åŸå› ï¼š** é•œåƒä¸åœ¨ Minikube çš„ Docker ä¸­

**è§£å†³ï¼š**
```bash
# ç¡®ä¿ä½¿ç”¨ Minikube çš„ Docker
eval $(minikube docker-env)

# é‡æ–°æ„å»ºé•œåƒ
cd /root/learn/01-k8s/backend
docker build -t login-backend:latest .

cd /root/learn/01-k8s/frontend
docker build -t login-frontend:latest .

# éªŒè¯é•œåƒå­˜åœ¨
docker images | grep login

# é‡å¯ Pod
kubectl rollout restart deployment/backend-deployment -n login-system
kubectl rollout restart deployment/frontend-deployment -n login-system
```

### Q5: æµè§ˆå™¨æ— æ³•è®¿é—® localhost:8080

**åŸå› ï¼š** Port-forward æœªè¿è¡Œæˆ–ç«¯å£è¢«å ç”¨

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
lsof -i :8080
netstat -tunlp | grep 8080

# æ€æ‰æ—§çš„ port-forward è¿›ç¨‹
pkill -f "port-forward"

# é‡æ–°å¯åŠ¨ port-forward
kubectl port-forward -n login-system service/frontend-service 8080:80

# æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£
kubectl port-forward -n login-system service/frontend-service 8888:80
```

### Q6: æ•°æ®åº“æ•°æ®ä¸¢å¤±

**åŸå› ï¼š** PV æœªæ­£ç¡®é…ç½®æˆ–è¢«åˆ é™¤

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥ PV çŠ¶æ€
kubectl get pv postgres-pv

# æŸ¥çœ‹æ•°æ®ç›®å½•
minikube ssh "sudo ls -la /mnt/data/postgres"

# å¤‡ä»½æ•°æ®ï¼ˆé¢„é˜²æ€§ï¼‰
kubectl exec -n login-system deployment/postgres-deployment -- \
  pg_dump -U postgres logindb > backup_$(date +%Y%m%d).sql
```

---

## ğŸ› ï¸ ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹çŠ¶æ€

```bash
# æŸ¥çœ‹æ‰€æœ‰èµ„æº
kubectl get all -n login-system

# æŸ¥çœ‹ Pod è¯¦ç»†ä¿¡æ¯
kubectl describe pod <pod-name> -n login-system

# æŸ¥çœ‹æ—¥å¿—
kubectl logs -f deployment/backend-deployment -n login-system
kubectl logs -f deployment/frontend-deployment -n login-system
kubectl logs -f deployment/postgres-deployment -n login-system

# æŸ¥çœ‹äº‹ä»¶
kubectl get events -n login-system --sort-by='.lastTimestamp'
```

### æ‰©ç¼©å®¹

```bash
# æ‰©å±•åç«¯åˆ° 5 ä¸ªå‰¯æœ¬
kubectl scale deployment backend-deployment --replicas=5 -n login-system

# æ‰©å±•å‰ç«¯åˆ° 3 ä¸ªå‰¯æœ¬
kubectl scale deployment frontend-deployment --replicas=3 -n login-system

# æŸ¥çœ‹æ‰©å®¹çŠ¶æ€
kubectl get pods -n login-system -w
```

### æ›´æ–°éƒ¨ç½²

```bash
# é‡æ–°æ„å»ºé•œåƒ
eval $(minikube docker-env)
docker build -t login-backend:v2 /root/learn/01-k8s/backend

# æ›´æ–°é•œåƒï¼ˆæ»šåŠ¨æ›´æ–°ï¼‰
kubectl set image deployment/backend-deployment \
  backend=login-backend:v2 -n login-system

# æŸ¥çœ‹æ»šåŠ¨æ›´æ–°çŠ¶æ€
kubectl rollout status deployment/backend-deployment -n login-system

# å›æ»š
kubectl rollout undo deployment/backend-deployment -n login-system
```

### é‡å¯æœåŠ¡

```bash
# é‡å¯åç«¯
kubectl rollout restart deployment/backend-deployment -n login-system

# é‡å¯å‰ç«¯
kubectl rollout restart deployment/frontend-deployment -n login-system

# é‡å¯æ•°æ®åº“ï¼ˆè°¨æ…æ“ä½œï¼‰
kubectl rollout restart deployment/postgres-deployment -n login-system
```

### è¿›å…¥å®¹å™¨

```bash
# è¿›å…¥åç«¯å®¹å™¨
kubectl exec -it -n login-system deployment/backend-deployment -- sh

# è¿›å…¥å‰ç«¯å®¹å™¨
kubectl exec -it -n login-system deployment/frontend-deployment -- sh

# è¿›å…¥æ•°æ®åº“å®¹å™¨
kubectl exec -it -n login-system deployment/postgres-deployment -- sh
```

### æ¸…ç†èµ„æº

```bash
# æ–¹æ³• 1ï¼šä½¿ç”¨æ¸…ç†è„šæœ¬
./scripts/cleanup.sh

# æ–¹æ³• 2ï¼šæ‰‹åŠ¨åˆ é™¤
kubectl delete namespace login-system
kubectl delete pv postgres-pv

# æ¸…ç† Minikube ä¸­çš„æ•°æ®
minikube ssh "sudo rm -rf /mnt/data/postgres"
```

---

## ğŸ“Š èµ„æºé…ç½®è¯´æ˜

### éƒ¨ç½²èµ„æºæ¸…å•

| èµ„æºç±»å‹ | åç§° | å‰¯æœ¬æ•° | å†…å­˜è¯·æ±‚ | CPUè¯·æ±‚ | è¯´æ˜ |
|---------|------|--------|----------|---------|------|
| **PostgreSQL** | postgres-deployment | 1 | 256Mi | 250m | æ•°æ®åº“+PV(10Gi) |
| **Backend** | backend-deployment | 3 | 256Mi | 250m | Django+DRF |
| **Frontend** | frontend-deployment | 2 | 64Mi | 100m | Vue3+Nginx |

### æŒä¹…åŒ–å­˜å‚¨

- **PV**: 10Gi (hostPath: /mnt/data/postgres)
- **PVC**: 5Gi (ä½¿ç”¨ manual StorageClass)
- **ä¿ç•™ç­–ç•¥**: Retainï¼ˆåˆ é™¤ PVC å PV ä»ä¿ç•™æ•°æ®ï¼‰

### ç½‘ç»œé…ç½®

| æœåŠ¡ | ç±»å‹ | é›†ç¾¤IP | ç«¯å£ | NodePort | è¯´æ˜ |
|------|------|--------|------|----------|------|
| postgres-service | ClusterIP | è‡ªåŠ¨åˆ†é… | 5432 | - | ä»…å†…éƒ¨è®¿é—® |
| backend-service | ClusterIP | è‡ªåŠ¨åˆ†é… | 8000 | - | ä»…å†…éƒ¨è®¿é—® |
| frontend-service | NodePort | è‡ªåŠ¨åˆ†é… | 80 | 30080 | å¤–éƒ¨å¯è®¿é—® |

---

## ğŸ” å®‰å…¨è¯´æ˜

### é»˜è®¤å¯†ç ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼ï¼‰

```bash
# PostgreSQL å¯†ç 
ç”¨æˆ·å: postgres
å¯†ç : postgres123 (base64: cG9zdGdyZXMxMjM=)

# Django Secret Key
django-secret-key-change-in-production-environment
```

### ä¿®æ”¹å¯†ç 

```bash
# 1. ç”Ÿæˆæ–°å¯†ç 
NEW_PASSWORD=$(openssl rand -base64 32)
echo -n "$NEW_PASSWORD" | base64

# 2. ç¼–è¾‘ Secret
kubectl edit secret postgres-secret -n login-system
kubectl edit secret backend-secret -n login-system

# 3. é‡å¯æœåŠ¡
kubectl rollout restart deployment/postgres-deployment -n login-system
kubectl rollout restart deployment/backend-deployment -n login-system
```

---

## ğŸ“š è¡¥å……æ–‡æ¡£

- **[K8S_DEPLOY.md](./K8S_DEPLOY.md)** - å®Œæ•´çš„ K8s éƒ¨ç½²æ–‡æ¡£
- **[DOCKER_DEPLOY.md](./DOCKER_DEPLOY.md)** - Docker Compose æœ¬åœ°éƒ¨ç½²
- **[TESTING_GUIDE.md](./TESTING_GUIDE.md)** - å‰åç«¯è”è°ƒæµ‹è¯•æŒ‡å—
- **[VUE3_NGINX_CONFIG.md](./VUE3_NGINX_CONFIG.md)** - Vue3 + Nginx é…ç½®è¯¦è§£
- **[BUGFIX.md](./BUGFIX.md)** - Bug ä¿®å¤è®°å½•

---

## ğŸ¯ ä¸‹ä¸€æ­¥

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å¯ä»¥ï¼š

1. **æµ‹è¯•å®Œæ•´æµç¨‹**ï¼šæ³¨å†Œ â†’ ç™»å½• â†’ æŸ¥çœ‹ä¿¡æ¯ â†’ é€€å‡º
2. **å‹åŠ›æµ‹è¯•**ï¼šä½¿ç”¨ `hey` æˆ– `ab` å·¥å…·æµ‹è¯•å¹¶å‘æ€§èƒ½
3. **é…ç½®ç›‘æ§**ï¼šéƒ¨ç½² Prometheus + Grafana
4. **å¯ç”¨ Ingress**ï¼šé…ç½®åŸŸåå’Œ TLS è¯ä¹¦
5. **é…ç½® CI/CD**ï¼šè‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²æµç¨‹

---

## ğŸ’¡ æŠ€æœ¯æ ˆæ€»ç»“

### å‰ç«¯
- **æ¡†æ¶**: Vue 3 (Composition API)
- **æ„å»º**: Vite
- **è·¯ç”±**: Vue Router 4 (History æ¨¡å¼)
- **HTTP**: Axios (æ‹¦æˆªå™¨ + Token è‡ªåŠ¨æ³¨å…¥)
- **Web æœåŠ¡å™¨**: Nginx (åå‘ä»£ç† + SPA æ”¯æŒ)

### åç«¯
- **æ¡†æ¶**: Django 4.2 + Django REST Framework
- **è®¤è¯**: JWT (djangorestframework-simplejwt)
- **æ•°æ®åº“**: PostgreSQL 15
- **WSGI æœåŠ¡å™¨**: Gunicorn (3 workers)

### å®¹å™¨åŒ–
- **åŸºç¡€é•œåƒ**: Alpine Linux (è½»é‡çº§)
- **æ„å»ºæ–¹å¼**: å¤šé˜¶æ®µæ„å»º
- **é•œåƒå¤§å°**: åç«¯ 116MBï¼Œå‰ç«¯ 53MB
- **ä¼˜åŒ–**: å›½å†…é•œåƒæºåŠ é€Ÿ

### Kubernetes
- **é›†ç¾¤**: Minikube (æœ¬åœ°å¼€å‘)
- **å‘½åç©ºé—´**: login-system
- **å­˜å‚¨**: hostPath PV (ç”Ÿäº§ç¯å¢ƒå»ºè®® NFS/Ceph)
- **ç½‘ç»œ**: ClusterIP + NodePort
- **å¥åº·æ£€æŸ¥**: Liveness + Readiness Probes

---

## ğŸ“ é—®é¢˜åé¦ˆ

å¦‚é‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜) ç« èŠ‚
2. æ£€æŸ¥ Pod æ—¥å¿—ï¼š`kubectl logs -f <pod-name> -n login-system`
3. æŸ¥çœ‹äº‹ä»¶ï¼š`kubectl get events -n login-system`
4. å‚è€ƒè¡¥å……æ–‡æ¡£

---

**ğŸ‰ æ­å–œï¼æ‚¨å·²æˆåŠŸéƒ¨ç½² K8s ç™»å½•ç³»ç»Ÿï¼**

**Happy Coding!** ğŸ’»

